
@{
    ViewBag.Title = "EmployeeDetails";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="~/app/EmployeeDetails.js"></script>

<script src="~/Scripts/bootstrap.js"></script>
<script src="~/Scripts/angular.js"></script>
<script src="~/Scripts/angular-resource.js"></script>
<script src="~/Scripts/angular-ui/ui-bootstrap-tpls-0.11.0.js"></script>

<style>
    .odd {
        background-color: antiquewhite;
        color: #008b8b;
    }

    td th {
        height: 30px;
        min-width: 100px;
    }

    thead {
        background-color: darkgray;
        color: white;
        height: 30px;
    }
</style>



<div ng-controller="EmployeeDetailsCtrl">
    <div id="page-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <h3 class="page-header">Employee Details</h3>
                <div>
                    <h5><button type="button" class="btn btn-sm btn-success" data-toggle="modal" ng-click="newEmployee()">Create</button></h5>@*newEmployee()setEmploymentType()*@
                    @*<div class="form-group row">
                            <label class="col-lg-3">Title:</label>
                            <div class="col-lg-4">
                                <select class="form-control selectpicker" ng-model="empType"
                                            ng-options="option.value as option.name for option in titleOptions" ng-sele>
                                        <option style="display:none" value="">- Select -</option>
                                    </select>
                                <select class="form-control selectpicker" ng-model="ddlFruits" ng-options="fruit.Id as fruit.Name for fruit in Fruits track by fruit.Id"
                                        ng-change="GetValue()"></select>
                            </div>
                        </div>*@
                </div>

                <div class="panel panel-default">
                    <div class="panel-heading"><b>Employees</b></div>
                    <div class="panel-body">

                        <div style="overflow-x: scroll;">
                            <div class="table table-responsive">
                                <table id="tblEmployeeDetails" class="table table-striped table-bordered table-hover" style="white-space: nowrap;">
                                    <thead style="font-size: 12px">
                                        <tr>
                                            <th>
                                                <a href="" ng-click="order('EmployeeNumber')">Employee No.</a>
                                            </th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Mobile No.</th>
                                            <th>NIC</th>
                                            <th>IsActive?</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody style="font-size: 12px">
                                        <tr>
                                            <td> <input type="text" ng-model="search.EmployeeNumber" /> </td>
                                            <td></td>
                                            <td></td> @*<input type="text" ng-model="search.Email" />*@
                                            <td> <input type="text" ng-model="search.Mobile" /></td>
                                            <td> <input type="text" ng-model="search.NIC" /> </td>
                                            <td></td>
                                            <td style="text-align: center"><button type="button" class="btn btn-sm" ng-click="clearFilter()"><i class="fa fa-refresh" title="Clear Filter"></i></button></td>
                                        </tr>
                                        <tr ng-show="empHistory!='undefined' && empHistory!='null' && empHistory.length!=0" ng-repeat="item in empHistory | orderBy:predicate:reverse | filter:paginate | filter:search" ng-class-odd="'odd'">
                                            <td>{{item.EmployeeNumber}}</td>
                                            <td>{{item.FirstName}} {{item.MiddleName}} {{item.LastName}}</td>
                                            <td>{{item.Email}}</td>
                                            <td>{{item.Mobile}}</td>
                                            <td>{{item.NIC}}</td>
                                            <td>{{item.IsActive}}</td>
                                            <td><button type="button" class="btn btn-sm" data-toggle="modal" ng-click="editEmployee(item)" onclick=" employee(this, 'Edit') "><i class="fa fa-edit" title="Edit"></i></button> | <button type="button" class="btn btn-primary btn-sm" id="delete" ng-click="deleteEmployee(item)"><i class="fa fa-trash-o" title="Delete"></i></button></td>
                                        </tr>
                                        <tr>
                                            <td ng-show="empHistory=='undefined' ||empHistory=='null' || empHistory.length==0 ">
                                                <span style="color: red">No data to display.</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <pagination total-items="totalItems" ng-model="currentPage"
                                            max-size="5" boundary-links="true"
                                            items-per-page="numPerPage" class="pagination-sm">
                                </pagination>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="modalEmployeeTypeSelect" tabindex="-1" role="dialog" aria-labelledby="labelUserEdit" aria-hidden="true" style="width: 100%">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    @*<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>*@
                    <h3 class="modal-title" style="color: red;">Select an Employee Type</h3>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" role="form">
                        <div class="row">
                            <div class="form-group">
                                <label class="col-lg-3">Employee Type</label>
                                <div class="col-lg-4">
                                    <select class="form-control selectpicker" ng-model="employmentType"
                                            ng-options="option.value as option.name for option in employmentTypes">
                                        <option style="display:none" value="">- Select -</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" ng-click="sendEmploymentType()">Set</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modalEmployeeDetails" tabindex="-1" role="dialog" aria-labelledby="labelUserEdit" aria-hidden="true" style="width: 100%">
        <div class="modal-dialog modalStyle">
            <div class="modal-content">
                <form class="form-horizontal" role="form" name="frmEmpDetails">
                    <div class="modal-header">
                        @*<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>*@
                        <h3 class="modal-title" style="color: green;"><span>{{employee.Id === undefined ? 'Create' : 'Edit'}}</span> Employee <span style="color: black; font-weight: bold">{{employee.EmployeeNumber === undefined ? '' : ' : ' + employee.EmployeeNumber}}</span></h3>
                    </div>
                    <div class="modal-body">
                        <div class="row">

                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                <div class="form-group">
                                    <label class="col-lg-3">Name:</label>
                                    <div class="col-lg-9">
                                        <input name="txtFirstName" type="text" class="form-control isRequiredField" placeholder="First Name" ng-model="employee.FirstName" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-lg-3"></label>
                                    <div class="col-lg-9">
                                        <input type="text" class="form-control" placeholder="Middle Name" ng-model="employee.MiddleName">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-lg-3"></label>
                                    <div class="col-lg-9">
                                        <input type="text" class="form-control" placeholder="Last Name" ng-model="employee.LastName">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-lg-3">Initials:</label>
                                    <div class="col-lg-4">
                                        <input type="text" class="form-control" placeholder="Initials" ng-model="employee.Initials">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-lg-3">Title:</label>
                                    <div class="col-lg-4">
                                        <select class="form-control selectpicker" ng-model="employee.Title"
                                                ng-options="option.value as option.name for option in titleOptions">
                                            <option style="display: none" value="">- Select -</option>
                                        </select>
                                    </div>
                                </div>
                                @*<div class="form-group">
                                        <label class="col-lg-3">Address:</label>
                                        <div class="col-lg-9">
                                            <input type="text" class="form-control" placeholder="Address 1" ng-model="employee.Address1">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-lg-3"></label>
                                        <div class="col-lg-9">
                                            <input type="text" class="form-control" placeholder="Address 2" ng-model="employee.Address2">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-lg-3">City: </label>
                                        <div class="col-lg-9">
                                            <input type="text" class="form-control" placeholder="City" ng-model="employee.City">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-lg-3">Country: </label>
                                        <div class="col-lg-9">
                                            <input type="text" class="form-control" placeholder="Country" ng-model="employee.Country">
                                        </div>
                                    </div>*@
                            </div>

                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                @*<div class="form-group">
                                        <label class="col-lg-3">Postal Code: </label>
                                        <div class="col-lg-9">
                                            <input type="text" class="form-control" placeholder="Postal Code" ng-model="employee.PostalCode">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-lg-3">Email:</label>
                                        <div class="col-lg-9">
                                            <input type="email" class="form-control isRequiredField" placeholder="Email Address" ng-model="employee.Email" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-lg-3">Contact No.:</label>
                                        <div class="col-lg-9">
                                            <input type="text" class="form-control" placeholder="Contact Number" ng-model="employee.ContactNumber">
                                        </div>
                                    </div>*@
                                <div class="form-group">
                                    <label class="col-lg-3">Gender:</label>
                                    <div class="col-lg-4">
                                        <select class="form-control selectpicker" ng-model="employee.Gender"
                                                ng-options="option.value as option.name for option in genderOptions">
                                            <option style="display: none" value="">- Select -</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-lg-3">Date of Birth:</label>
                                    <div class="col-lg-4 ">
                                        <input type="text" id="datepicker" class="form-control dptext input-daterange input-group dpDiv" placeholder="Date of Birth" ng-model="employee.DateOfBirth" data-date-format="dd/mm/yyyy" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-lg-3">NIC Number:</label>
                                    <div class="col-lg-6">
                                        <input type="text" class="form-control isRequiredField" placeholder="NIC Number" ng-model="employee.NIC" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-lg-3">Marital Status:</label>
                                    <div class="col-lg-4">
                                        <select class="form-control selectpicker" ng-model="employee.MaritalStatus"
                                                ng-options="option.value as option.name for option in maritalStatusOptions">
                                            <option style="display: none" value="">- Select -</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-lg-3 ">Is Active ?</label>
                                    <div class="col-lg-4">
                                        <input type="checkbox" ng-model="employee.IsActive">
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="closeModal()">Close</button>
                        <button type="submit" class="btn btn-primary" ng-disabled="frmEmpDetails.$invalid" ng-click="sendEmployee()">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

</div>